<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Test">
    <select id="selectAllDeviceList">
    SELECT device_list.id, device_list.name, driver_list.name AS connect_type, device_type.name AS device_type
    FROM device_list
    INNER JOIN device_type ON device_list.id_device_type=device_type.id
    INNER JOIN communication ON device_list.id_communication=communication.id
    INNER JOIN driver_list ON communication.id_driver_list=driver_list.id where device_list.status=1;
    </select>
    
    <select id="selectOneDeviceList">
        SELECT device_list.id, device_list.name, 
        device_list.rtu_bus_address AS rtu_bus_address,
        device_list.tcp_gateway_ip AS tcp_gateway_ip,
        device_list.tcp_gateway_port AS tcp_gateway_port,
        driver_list.name AS connect_type, device_type.name AS device_type,
        

        device_group.name as device_group,
        template_library.name as template_name
        FROM device_list
        INNER JOIN device_type ON device_list.id_device_type=device_type.id
        INNER JOIN communication ON device_list.id_communication=communication.id
        INNER JOIN driver_list ON communication.id_driver_list=driver_list.id 
        INNER JOIN device_group ON device_list.id_device_group=device_group.id
        INNER JOIN template_library ON device_group.id_template=template_library.id
        where 
        device_list.id=%s;
        </select>
    <select id="selectOneDeviceList_pointList">
            SELECT device_list.id, device_list.name, 
            driver_list.name AS connect_type, device_type.name AS device_type,
            device_group.name as device_group,
            template_library.name as template_name
            FROM device_list
            INNER JOIN device_type ON device_list.id_device_type=device_type.id
            INNER JOIN communication ON device_list.id_communication=communication.id
            INNER JOIN driver_list ON communication.id_driver_list=driver_list.id 
            INNER JOIN device_group ON device_list.id_device_group=device_group.id
            INNER JOIN template_library ON device_group.id_template=template_library.id
            INNER JOIN point_list ON template_library.id=point_list.id_template
            where 
            device_list.id=%s;
            </select>
        <select id="selectOneDeviceList_register_block">
                SELECT device_list.id, device_list.name, 
                driver_list.name AS connect_type, device_type.name AS device_type,
                device_group.name as device_group,
                template_library.name as template_name,
                register_block.addr as addr,register_block.count as count,
                config_information.namekey as Function
                FROM device_list
                INNER JOIN device_type ON device_list.id_device_type=device_type.id
                INNER JOIN communication ON device_list.id_communication=communication.id
                INNER JOIN driver_list ON communication.id_driver_list=driver_list.id 
                INNER JOIN device_group ON device_list.id_device_group=device_group.id
                INNER JOIN template_library ON device_group.id_template=template_library.id
                INNER JOIN register_block ON template_library.id=register_block.id_template
                INNER JOIN config_information ON register_block.id_type_function=config_information.id
                where 
                device_list.id=%s;
                </select>
</mapper>